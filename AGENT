# Create solution and projects (if starting from scratch)
dotnet new sln -n zapret-gui
mkdir -p src/ZapretCli src/ZapretGui config docs

# Console adapter
dotnet new console -n ZapretCli -o src/ZapretCli
# WPF app
dotnet new wpf -n ZapretGui -o src/ZapretGui

# Tests (optional)
dotnet new xunit -n ZapretCli.Tests -o tests/ZapretCli.Tests
dotnet new xunit -n ZapretGui.Tests -o tests/ZapretGui.Tests

# Solution references
dotnet sln zapret-gui.sln add src/ZapretCli/ZapretCli.csproj
dotnet sln zapret-gui.sln add src/ZapretGui/ZapretGui.csproj
dotnet sln zapret-gui.sln add tests/ZapretCli.Tests/ZapretCli.Tests.csproj
dotnet sln zapret-gui.sln add tests/ZapretGui.Tests/ZapretGui.Tests.csproj

# Project references
dotnet add tests/ZapretCli.Tests/ZapretCli.Tests.csproj reference src/ZapretCli/ZapretCli.csproj
dotnet add tests/ZapretGui.Tests/ZapretGui.Tests.csproj reference src/ZapretGui/ZapretGui.csproj

# Useful packages
dotnet add src/ZapretCli/ZapretCli.csproj package System.CommandLine --version 2.0.0-beta4.22272.1
dotnet add src/ZapretCli/ZapretCli.csproj package Microsoft.Extensions.Configuration
dotnet add src/ZapretCli/ZapretCli.csproj package Microsoft.Extensions.Configuration.Json
dotnet add src/ZapretCli/ZapretCli.csproj package Microsoft.Extensions.Configuration.EnvironmentVariables
dotnet add src/ZapretGui/ZapretGui.csproj package CommunityToolkit.Mvvm

# Example config
cat > config/zapret-adapter.example.json <<EOF
{
  "zapretPath": "C:\\\\Tools\\\\zapret-discord-youtube",
  "generalMask": "general (*.bat)",
  "serviceScript": "service.bat"
}
EOF
